/* ===============================
   PokéBros — clean mobile-first UI
   =============================== */
:root{
  --poke-red:#e3350d; --poke-blue:#3d7dca; --poke-yellow:#ffcb05; --poke-navy:#0a285f;
  --bg:#0a0f1e; --card:#0c2552; --card-2:#081b3b; --text:#f2f6ff; --muted:#a9b8d9;
  --accent:var(--poke-yellow); --danger:#cf2e2e; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html{height:100%; -webkit-text-size-adjust:100%;}
body{
  min-height:100%;
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial;
  color: var(--text);
  background: linear-gradient(180deg, var(--bg) 0%, var(--bg) 100%);
}

/* ---------- hero header ---------- */
.hero{
  background: url("images/logo.png") center/cover no-repeat;
  min-height: clamp(200px, 28vw, 360px);
  margin-bottom: 10px;
  display:flex; flex-direction:column; align-items:center; justify-content:flex-end;
  padding: 24px 16px 56px;
  border-bottom: 3px solid rgba(255,203,5,.25);
  box-shadow: 0 6px 28px rgba(0,0,0,.3);
  text-align:center;
  position:relative; isolation:isolate;
}
.hero::before{ content:""; position:absolute; inset:0; background:linear-gradient(180deg,rgba(0,0,0,.25),rgba(0,0,0,.35)); z-index:-1; }
.hero h1{ margin:0; font-size: clamp(1.8rem, 4vw, 2.8rem); color:#ffcb05; text-shadow:2px 2px 4px #2a75bb; }
.hero .subtitle{ margin-top:6px; font-size: clamp(.9rem,2vw,1.1rem); color:#fff; text-shadow:1px 1px 2px rgba(0,0,0,.6); }
@media (max-width: 640px){ .hero{ background-size:contain; } }

/* ---------- cards ---------- */
.card{
  background: linear-gradient(180deg, var(--card), var(--card-2));
  border: 1px solid rgba(255,255,255,.06);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 16px;
  margin: 12px;
}
.card h2{ margin:0 0 12px; font-size:1.15rem; letter-spacing:.3px; }

/* ---------- rows & controls ---------- */
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin: 10px 0; }
input[type="text"], input[type="number"], select, textarea{
  background:#0b1222; border:1px solid rgba(255,255,255,.08); color:var(--text);
  padding:10px 12px; border-radius:10px; min-width:160px; outline:none;
  font-size:16px; /* iOS: prevent zoom */
}
input::placeholder{ color:#6b7280; }

/* ---------- buttons ---------- */
button{
  cursor:pointer; border:1px solid rgba(255,255,255,.14);
  background: linear-gradient(180deg, #1a2338, #131b2e); color:var(--text);
  padding:10px 14px; border-radius:12px;
  transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
  box-shadow:0 6px 16px rgba(0,0,0,.25);
  font-size:16px; min-height:40px;
}
button:hover{ transform:translateY(-1px); border-color:rgba(255,255,255,.28); }
button:active{ transform:translateY(0); }
button.danger{ background:linear-gradient(180deg,#2a0e10,#220a0c); color:#ffb4b4; border-color:rgba(255,0,0,.25); }
#random-r1{ background:linear-gradient(180deg,#162a17,#0f1f11); color:#c2f7c9; }
#build-rounds{ background:linear-gradient(180deg,#172238,#111a2c); color:#cfe3ff; }

/* ---------- players list ---------- */
#players-list{ list-style:none; padding:0; margin:8px 0 0; display:grid; gap:8px; }
#players-list li{
  display:flex; justify-content:space-between; align-items:center;
  background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06);
  padding:8px 10px; border-radius:10px;
}

/* ---------- rounds ---------- */
.round{ background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:12px; margin:10px 0; }
.round h3{ margin:0 0 8px; font-size:1rem; color:#f1f5f9; }
.match{ border:1px dashed rgba(255,255,255,.10); border-radius:12px; padding:10px; margin:10px 0; background:rgba(255,255,255,.03); }
.match .row label{ min-width:86px; color:var(--muted); font-size:.92rem; }

/* ---------- leaderboard ---------- */
#leaderboard{ width:100%; border-collapse:collapse; overflow:hidden; border-radius:12px; box-shadow:var(--shadow); }
#leaderboard thead th{
  text-align:left; font-weight:600; font-size:.95rem; color:#111827;
  background: linear-gradient(180deg, #ffd25c, #ffb700); padding:10px 12px;
}
#leaderboard tbody td{ padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.06); }
#leaderboard tbody tr:nth-child(odd){ background:rgba(255,255,255,.02); }
#leaderboard tbody tr:nth-child(1) td:first-child{ color:#ffd25c; font-weight:700; }
#leaderboard tbody tr:nth-child(2) td:first-child{ color:#cfd8dc; font-weight:700; }
#leaderboard tbody tr:nth-child(3) td:first-child{ color:#cd7f32; font-weight:700; }

/* ---- Card Search ---- */
#card-search .row{ display:flex; flex-wrap:wrap; gap:12px; }
#card-search #tcg-query, #card-search #tcg-type{ flex:1 1 220px; min-width:0; }
label[for="tcg-standard"]{ flex:0 0 auto; white-space:nowrap; }

.tcg-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(190px, 1fr)); gap:12px; margin-top:10px; }
.tcg-card{ border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px; background:rgba(255,255,255,.03); display:flex; flex-direction:column; gap:8px; }
.tcg-card img{ width:100%; height:auto; border-radius:8px; display:block; background:#0b1222; }
.tcg-card .meta{ font-size:.9rem; color:var(--muted); line-height:1.3; }
.tcg-card .name{ font-weight:600; color:#fff; }
.tcg-card .tags{ display:flex; gap:6px; flex-wrap:wrap; margin-top:2px; }
.tcg-tag{ font-size:.75rem; padding:2px 6px; border:1px solid rgba(255,255,255,.15); border-radius:999px; background:rgba(255,255,255,.06); }

/* ---- Tabs ---- */
.tabs{
  display:flex; gap:8px; justify-content:center; padding:10px 12px;
  border-bottom:1px solid rgba(255,255,255,.06); margin:0 auto 10px;
  position:sticky; top:0; z-index:50; backdrop-filter:blur(6px);
  background: linear-gradient(180deg, rgba(10,15,30,.85), rgba(10,15,30,.7));
  padding-top: calc(10px + env(safe-area-inset-top));
  margin-top: calc(10px + env(safe-area-inset-top));
}

@supports (padding: max(0px)) {
  .tabs{
    top: max(0, env(safe-area-inset-top));
  }
}

.tab{ cursor:pointer; border:1px solid rgba(255,255,255,.14); background:linear-gradient(180deg,#172238,#111a2c); color:var(--text); padding:8px 14px; border-radius:999px; font-weight:600; box-shadow:0 6px 16px rgba(0,0,0,.2); min-height:40px; }
.tab.active{ border-color:var(--accent); box-shadow:0 0 0 2px rgba(255,203,5,.25); }

/* ---- Panels ---- */
.tab-panel{ display:none; }
.tab-panel.is-active{ display:block; }

/* ---- Accessibility ---- */
.tab:focus-visible, button:focus-visible, select:focus-visible, input:focus-visible{
  outline:2px solid var(--accent); outline-offset:2px; box-shadow:0 0 0 2px rgba(255,203,5,.25);
}
@media (prefers-reduced-motion: reduce){ *{ transition:none !important; } }

/* ---------- responsive tweaks ---------- */
@media (max-width: 640px){
  .row{ flex-direction:column; align-items:stretch; }
  input, select, button, textarea{ width:100%; }
  #players-list li{ gap:10px; }
}

/* ====== Utilities & A11y helpers ====== */
.visually-hidden{
  position:absolute !important;
  width:1px; height:1px;
  margin:-1px; padding:0; border:0;
  clip:rect(0 0 0 0); clip-path:inset(50%);
  overflow:hidden; white-space:nowrap;
}

/* Skip to content link for keyboard users */
.skip-link{
  position:absolute; left:8px; top:-40px;
  background: var(--poke-yellow); color:#111;
  padding:.5rem .75rem; border-radius:8px;
  box-shadow:0 6px 16px rgba(0,0,0,.25);
  transition: top .15s ease;
  z-index: 1000;
}
.skip-link:focus{ top: 8px; }

/* Respect [hidden] in HTML */
[hidden]{ display:none !important; }

/* Touch targets & disabled states */
button[disabled], .tab[aria-disabled="true"]{
  opacity:.55; cursor:not-allowed; filter:grayscale(20%);
}

/* Leaderboard: allow horizontal scroll on narrow screens */
.card:has(#leaderboard){ overflow-x:auto; }
@supports not (selector(:has(*))){
  #leaderboard{ display:block; max-width:100%; overflow-x:auto; }
}

/* High-contrast mode */
@media (forced-colors: active){
  * { forced-color-adjust: auto; }
  #leaderboard thead th {
    background: CanvasText;
    color: Canvas;
    border-bottom: 2px solid Canvas;
  }
  button, .tab { border: 1px solid CanvasText; }
}

/* Print standings only */
@media print{
  body{ background:#fff; color:#000; }
  .hero, .tabs, footer, #panel-cards, .row button, .import-label{ display:none !important; }
  .card{ box-shadow:none; border:0; margin:0; padding:0; }
  #leaderboard thead th{ background:#eee !important; color:#000 !important; }
}

/* --- Bottom breathing room & safe areas --- */
#panel-tournament, #panel-cards { padding-bottom: 32px; }
#stage-nav-bottom.card { margin: 12px auto 8px; max-width: 860px; }
#stage-nav-bottom .row { justify-content: center; gap: 12px; }
#panel-tournament footer {
  display:flex; flex-wrap:wrap; justify-content:center; align-items:center;
  gap:10px; padding:10px 12px;
}
@supports (padding: max(0px)) {
  body { padding-bottom: max(0px, env(safe-area-inset-bottom)); }
  #panel-tournament, #panel-cards { padding-bottom: max(16px, env(safe-area-inset-bottom)); }
}

/* --- AI panel --- */
#ai-panel .ai-messages {
  max-height: 360px; overflow: auto; display: flex; flex-direction: column;
  gap: 8px; padding: 8px; border-radius: 10px; background: rgba(0,0,0,.15);
}
.ai-msg { display:flex; }
.ai-msg.user{ justify-content:flex-end; }
.ai-msg.assistant{ justify-content:flex-start; }
.ai-msg .bubble{
  padding:10px 12px; border-radius:14px; line-height:1.35; max-width:75ch; white-space:pre-wrap;
}
.ai-msg.user .bubble{ background:rgba(255,255,255,.09); border:1px solid rgba(255,255,255,.15); }
.ai-msg.assistant .bubble{ background:rgba(255,215,0,.09); border:1px solid rgba(255,215,0,.18); }

/* --- Modal --- */
.pb-modal[hidden]{ display:none; }
.pb-modal{ position:fixed; inset:0; z-index:9999; display:grid; place-items:center; }
.pb-modal::before{ content:""; position:absolute; inset:0; background:rgba(0,0,0,.6); }
.pb-modal-content{
  position:relative; max-width:900px; width:min(92vw,900px); max-height:90vh; overflow:auto;
}
/* match your HTML id */
#card-modal-body img{ display:block; width:100%; height:auto; }
.pb-attack{ margin:6px 0; padding:6px 8px; border-radius:8px; background:rgba(255,255,255,.03); }
.pb-attack .dmg{ font-weight:600; margin-left:6px; }
.pb-attack .cost{ font-size:12px; opacity:.8; }

/* --- Small-phone niceties --- */
@media (max-width: 480px){
  .row input, .row select, .row textarea, .row button{ padding:10px 12px; }
}